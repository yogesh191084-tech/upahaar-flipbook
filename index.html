<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Upahaar - Flipbook</title>
<style>
  :root { --bg:#f2efe9; --card:#fff; --muted:#6b6b6b; --accent:#222; }
  html,body { height:100%; margin:0; font-family:Inter, system-ui, Arial, sans-serif; background:var(--bg); }
  .wrap { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px; box-sizing:border-box; }
  .viewer { width:92vw; max-width:1100px; height:88vh; max-height:820px; background:var(--card); box-shadow:0 18px 50px rgba(0,0,0,0.12); border-radius:12px; overflow:hidden; position:relative; }
  .page { width:100%; height:100%; display:flex; align-items:center; justify-content:center; transition: transform 0.5s cubic-bezier(.2,.9,.2,1), opacity 0.45s ease; backface-visibility:hidden; position:absolute; top:0; left:0; will-change: transform, opacity; pointer-events:none; background:#fff; }
  .page img { max-width:100%; max-height:100%; display:block; border-radius:6px; box-shadow:0 6px 18px rgba(0,0,0,0.06); user-select:none; pointer-events:none; }
  .controls { position:absolute; bottom:14px; left:50%; transform:translateX(-50%); display:flex; gap:10px; z-index:99999; }
  .controls button { background:var(--accent); color:white; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-size:14px; opacity:.96; }
  .controls button:disabled { opacity:0.35; cursor:default; }
  .counter { position:absolute; top:12px; right:12px; background:rgba(0,0,0,0.6); color:#fff; padding:6px 10px; border-radius:6px; font-size:13px; z-index:99999; }
  .sound-toggle { position:absolute; top:12px; left:12px; display:flex; gap:8px; align-items:center; z-index:99999; }
  .sound-toggle button { background:transparent; color:var(--accent); border:1px solid #ddd; padding:6px 10px; border-radius:6px; font-size:13px; cursor:pointer; }
  .share { position:absolute; top:12px; left:150px; display:flex; gap:8px; align-items:center; z-index:99999; }
  .share button { background:transparent; color:var(--accent); border:1px solid #ddd; padding:6px 10px; border-radius:6px; font-size:13px; cursor:pointer; }
  .note { position:absolute; bottom:14px; right:14px; font-size:12px; color:var(--muted); z-index:99999; }
  .fallback { padding:20px; text-align:center; color:var(--muted); }

  /* cover overlay */
  .cover {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
    background: linear-gradient(rgba(255,255,255,0.75), rgba(255,255,255,0.65));
    z-index: 999999;
  }
  .cover-card {
    text-align: center;
    padding: 28px 34px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    background: white;
    max-width: 720px;
  }
  .cover-card h1 { margin:0 0 8px; font-size:34px; color:var(--accent); }
  .cover-sub { margin:0 0 16px; color:var(--muted); }
  .cover-card button {
    background:var(--accent); color:#fff; border:none; padding:10px 18px; border-radius:8px; cursor:pointer; font-size:16px;
  }
  .cover-small { margin-top:12px; font-size:12px; color:var(--muted); }

  /* contact page */
  .contact-card {
    text-align:center;
    padding:30px;
    max-width:600px;
  }
  .contact-card h2 { font-size:28px; margin-bottom:10px; color:var(--accent); }
  .contact-card p { margin:10px 0; color:var(--muted); }
  .contact-links { margin-top:20px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
  .contact-links a {
    padding:10px 14px; border-radius:8px; text-decoration:none;
    border:1px solid #ddd; background:#fafafa; color:var(--accent);
  }

  @media (max-width:700px) {
    .viewer { width:98vw; height:92vh; }
    .controls button { padding:8px 10px; font-size:13px; }
    .cover-card{ padding:18px; }
    .cover-card h1{ font-size:22px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="viewer" id="viewer" aria-live="polite">
    <div class="sound-toggle"><button id="soundBtn">üîä Sound: ON</button></div>
    <div class="share">
      <button id="shareWhats">WhatsApp</button>
      <button id="shareLinked">LinkedIn</button>
      <button id="shareEmail">Email</button>
    </div>
    <div class="counter" id="counter">0 / 0</div>

    <!-- cover / title overlay -->
    <div class="cover" id="cover" role="dialog" aria-label="Upahaar catalogue cover">
      <div class="cover-card">
        <h1>Upahaar</h1>
        <p class="cover-sub">Corporate gifting solutions ‚Äî product catalogue</p>
        <button id="startBtn">Start flipping ‚ñ∂</button>
        <p class="cover-small">Use ‚Üê ‚Üí keys to flip after starting</p>
      </div>
    </div>

    <!-- pages will be injected here by script -->
    <div class="controls" id="controls">
      <button id="prevBtn">‚óÄ Prev</button>
      <button id="nextBtn">Next ‚ñ∂</button>
    </div>
    <div class="note">Use ‚Üê ‚Üí keys to flip. Click once to enable sound on some browsers.</div>
  </div>
</div>

<script>
(function(){
  const viewer = document.getElementById('viewer');
  const counter = document.getElementById('counter');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const soundBtn = document.getElementById('soundBtn');
  const shareWhats = document.getElementById('shareWhats');
  const shareLinked = document.getElementById('shareLinked');
  const shareEmail = document.getElementById('shareEmail');

  const maxPagesProbe = 79; // 79 images, 80th is contact
  const pad = n => String(n).padStart(3, '0');

  function probePages(maxN=79) {
    return new Promise((resolve) => {
      const found = [];
      let checked = 0;
      for (let i=1; i<=maxN; i++){
        const name = `pages/page_${pad(i)}.png`;
        const img = new Image();
        img.onload = function(){ found.push({name}); done(); };
        img.onerror = function(){ done(); };
        img.src = name + '?_=' + Date.now() + Math.floor(Math.random()*1000);
      }
      function done(){
        checked++;
        if (checked >= maxN) resolve(found.map(x=>x.name));
      }
    });
  }

  async function init(){
    const images = await probePages(maxPagesProbe);
    if (!images || images.length === 0){
      viewer.innerHTML = '<div class="fallback"><h3>No pages found</h3></div>';
      return;
    }

    // add image pages
    images.forEach((src, i)=>{
      const el = document.createElement('div');
      el.className = 'page';
      el.dataset.idx = i;
      const img = document.createElement('img');
      img.src = src;
      el.appendChild(img);
      viewer.appendChild(el);
    });

    // add contact page as last
    const contactEl = document.createElem
